<!DOCTYPE html>
<html>
<head>
<title>图书信息详情页</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8" />

<script src="../../scripts/boot.js" type="text/javascript"></script>
<link href="../../demo/demo.css" rel="stylesheet" type="text/css" />

<style type="text/css">
html, body {
	padding: 0;
	margin: 0;
	border: 0;
	height: 100%;
	overflow: hidden;
}
</style>
<style type="text/css">
.asLabel .mini-textbox-border, .asLabel .mini-textbox-input, .asLabel .mini-buttonedit-border,
	.asLabel .mini-buttonedit-input, .asLabel .mini-textboxlist-border {
	border: 0;
	background: none;
	cursor: default;
}

.asLabel .mini-buttonedit-buttons, .asLabel .mini-buttonedit-button,
	.asLabel .mini-textboxlist-close {
	display: none;
}

.asLabel .mini-textboxlist-item {
	padding-right: 8px;
}
</style>
</head>
<body>
	<form id="form1" method="post">
		<fieldset style="border: solid 1px #aaa; padding: 3px;">
			<legend>图书信息详情</legend>
			<div style="padding: 5px;">
				<table>
					<tr>
						<td style="width: 80px">图书名称：</td>
						<td style="width: 150px"><input name="bookName"
							class="mini-textbox" emptyText="请输入图书名称" required="true" /></td>

						<td style="width: 80px">出版社：</td>
						<td style="width: 150px"><input name="publisher"
							class="mini-textbox" required="true" /></td>
					</tr>
					<tr>
						<td style="width: 80px">作者：</td>
						<td style="width: 150px"><input name="author"
							class="mini-textbox" required="true" /></td>

						<td style="width: 80px">图书类别：</td>
						<td><input name="bookType" class="mini-combobox"
							url="../../data/booktype.txt" readOnly="true" /></td>
					</tr>
					<tr>
						<td align="right">剩余数量：</td>
						<td><input name="remain" class="mini-spinner" minValue="1"
							maxValue="200" /></td>
					</tr>
				</table>
			</div>
		</fieldset>
		<div style="text-align: center; padding: 10px;">
			<a class="mini-button" onclick="onCancel()" style="width: 60px;">关闭</a>
		</div>
	</form>
	<script type="text/javascript">
	
	mini.parse();
	var form = new mini.Form("form1");
	
	
	//打开修改时填入表单数据
    function setData(data){
    	//页面之间传递数据需要克隆后使用
    	data = mini.clone(data);

        $.ajax({
            url: "../../bookinfoeditaction?method=querybookinfobyid&bookid=" + data.bookid,
            cache: false,
            success: function (text) {
                var o = mini.decode(text);
                form.setData(o);
                form.setChanged(false);//设置当前表单为未修改
            }
        });
    }
	
	labelModel();
	//只读模板
	function labelModel() {
        var fields = form.getFields();                
        for (var i = 0, l = fields.length; i < l; i++) {
            var c = fields[i];
            if (c.setReadOnly) c.setReadOnly(true);     //只读
            if (c.setIsValid) c.setIsValid(true);      //去除错误提示
            if (c.addCls) c.addCls("asLabel");          //增加asLabel外观
        }
    }
	
    //关闭窗口
    function CloseWindow(action) {            
    	if (window.CloseOwnerWindow){
        	return window.CloseOwnerWindow(action);
        }
        else{
        	return window.close();            
        }
    }
    
    //取消
    function onCancel(e) {
        CloseWindow("cancel");
    }
	</script>
</body>
</html>